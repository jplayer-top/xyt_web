<!DOCTYPE html>
<html>
	<!-- https://element.faas.ele.me/#/zh-CN/component/layout -->
	<head>
		<meta http-equiv="content-type" content="text/html" charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	</head>

	<body>
		<div id="app">
			<el-row>
				<el-col :span="24">
					<div>
						<span class="title" v-text='info["title"]'></span>
					</div>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="24">
					<div>
						<img src="img/avatar.png" class="img_border">
						<div class="div_name_time">
							<p class="text_middle" v-text='info["puber_name"]'></p>
							<div>
								<span class="text_small" v-text='info["ct"]' /></span>
								<span class="text_small" />&nbsp;&nbsp;&nbsp;&nbsp;阅读：{{info["visitor"]}}</span>
							</div>
						</div>
					</div>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="24">
					<div class="desc">
						<span class="text_middle" v-text='info["description"]'></span>
					</div>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="24">
					<img class="big_img" src="img/avatar.png">
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="24">
					<div class="mid">
						<p v-text='info["title"]'></p>
						<el-dialog title="提示" :visible.sync="dialogVisible" width="70%" >
							<span>文章收藏成功</span>
							<p >
								<el-button @click="dialogVisible = false">确 定</el-button>
							</p>
						</el-dialog>
						<el-button size="mini" @click="collection()" type="primary" icon="el-icon-star-off">收藏</el-button>
					</div>
				</el-col>
			</el-row>
		</div>
	</body>
	<!-- import Vue before Element -->
	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<!-- import JavaScript -->
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	<script>
		new Vue({
			el: '#app',
			data: function() {
				return {
					visible: false,
					title: "学艺团官方活动",
					description: "",
					dialogVisible: false,
					info: {

					}
				}
			},
			created: function() {
				this.GetRequest();
			},
			methods: {
				GetRequest: function() {
					var url = location.search;
					var theRequest = new Object();
					if (url.indexOf("?") != -1) {
						var str = url.substr(1);
						strs = str.split("&");
						for (var i = 0; i < strs.length; i++) {
							theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
						}
					}
					this.getJson(theRequest["id"]);
				},
				getJson: function(id) {
					var self = this;
					axios.get('https://www.xueyituanchian.cn/xytuan/api/home/topinfo?id=' + id)
						.then(function(response) {
							self.info = response.data["info"]
							console.log(response)
						})
						.catch(function(error) {
							console.log(error);
						});
				},
				collection: function() {
					this.dialogVisible = true;
				}
			}
		})
	</script>

	<style>
		.mid {
			text-align: center;
			font-size: 15px;
			margin: 10px;
			font-weight: bold;
		}

		.big_img {
			width: 100%;
			margin-top: 10px;
			height: 200px;
		}

		.desc {
			font-size: 14px;
			line-height: 22px;
			margin-left: 10px;
			margin-right: 10px;
			text-indent: 1em;
		}

		.div_name_time {
			float: left;
		}

		.title {
			font-size: 20px;
			margin: 10px;
			font-weight: bold;
		}

		.btest {
			background: burlywood;
		}

		.text_small {
			font-size: 12px;
			color: #999999;
		}

		.text_middle {
			font-size: 14px;
			color: #666666;
		}

		.img_border {
			float: left;
			margin: 10px;
			width: 50px;
			height: 50px;
			border-radius: 90px;
		}
	</style>
